spring:
  # R2DBC Configuration (WebFlux)
  r2dbc:
    url: r2dbc:mysql://${DB_HOST:localhost}:${DB_PORT:3308}/${DB_NAME:shortly_redirect}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:password}
    pool:
      initial-size: 20
      max-size: 100
      max-idle-time: 30m
      max-acquire-time: 3s
      validation-query: SELECT 1

  # Schema initialization
  sql:
    init:
      mode: always
      schema-locations: classpath:schema.sql

  # JPA 비활성화 (WebFlux는 사용하지 않음)
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration

logging:
  level:
    com.io.shortly.redirect.webflux: DEBUG
    org.springframework.r2dbc: DEBUG
