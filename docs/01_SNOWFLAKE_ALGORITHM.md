## 1. 문제 배경

기존 방식
- 원본 URL과 Timestamp를 조합 -> SHA-256 해싱 후 Base62로 인코딩

발생한 문제
- 충돌 증가: 5만 건 요청 시 639건 충돌 발생
- 유일성 검사 및 재시도로 인한 DB 부하 증가

## 2. 해결 전략

### 2.1 UUID
128비트의 무작위 값을 생성하여 충돌 확률이 극히 낮지만 짧은 URL이라는 서비스 목적에 부합하지 않아 제외했다.

### 2.2 Redis Atomic Counter
Redis의 `INCR` 명령어를 사용하여 고유 ID를 생성하는 방식이다. URL 단축 요청마다 Redis 통신이 필요하므로 네트워크 통신 비용이 발생하고, Redis 장애 시 전체 서비스가 중단되는 문제가 있다.

### 2.3 Snowflake Algorithm (채택)
분산 ID 생성 알고리즘으로 외부 통신 없이 애플리케이션 내에서 독립적으로 고유 ID를 생성할 수 있다. Time + NodeID + Sequence로 구성되어 충돌 가능성이 사실상 0%이며, Bitwise 연산만 수행하기 때문에 성능이 우수하다.

## 3. 결과
- 10개의 인스턴스에서 50만 개의 단축 요청 -> 충돌 0건.
- 중복 확인 및 재시도 로직 제거로 생성 속도 3.2배 개선(141ms → 44ms).
